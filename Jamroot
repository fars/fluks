using gcc
	: # compiler version
	: # c++ compile command
	: # c++ cannot use -pedantic as <tr1/*> headers are needed
	<cxxflags>"-std=c++98"
	<cflags>"-std=c99 -pedantic"
	;
lib boost_filesystem ;
lib boost_program_options ;
lib boost_regex ;
lib boost_system ;
lib devmapper ;
lib ssl ;
lib uuid ;
lib fluks_crypto
	: serpent.cpp
	cast6.c tiger.c twofish.c whirlpool.c

	# -D_BSD_SOURCE needed for proper endian macros
	: <define>_BSD_SOURCE
	<variant>release:<define>NDEBUG
#	<variant>release:<define>NASSERT
	<variant>debug:<define>DEBUG
	;
exe fluks
	: af.cpp backup.cpp cipher.cpp crypt.cpp
	detect.cpp dm.cpp errors.cpp fluks.cpp
	hash.cpp hmac.cpp luks.cpp os.cpp pbkdf2.cpp
	support.cpp

	fluks_crypto/<link>static
	boost_filesystem boost_program_options
	boost_regex boost_system devmapper ssl uuid

	: <define>_BSD_SOURCE
	<variant>release:<define>NDEBUG
#	<variant>release:<define>NASSERT
	<variant>debug:<define>DEBUG
	;
exe run_test
	: run_test.cpp
	cipher.cpp crypt.cpp errors.cpp hash.cpp hmac.cpp
	support.cpp

	fluks_crypto/<link>static
	boost_system ssl

	: <define>_BSD_SOURCE
	<variant>release:<define>NDEBUG
#	<variant>release:<define>NASSERT
	<variant>debug:<define>DEBUG
	;
install dist
	: fluks

	: <variant>release:<location>release
	<variant>debug:<location>debug
	;
